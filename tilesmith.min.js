var tilesmith=function(t,e){function n(){var t=document.querySelectorAll(".tilesmith-col"),t=o(t),e=t.reduce(function(t,e){return parseInt(i(t).height)<parseInt(i(e).height)?t:e}),l=t.reduce(function(t,e){return parseInt(i(t).height)>parseInt(i(e).height)?t:e}),c=parseInt(i(l).height),r=parseInt(i(e).height),u=parseInt(i(l.lastChild).height);c>r+u&&(e.appendChild(l.lastChild),n())}var i=function(t){return t.currentStyle?t.currentStyle:document.defaultView.getComputedStyle(t,"")},o=Function.prototype.call.bind(Array.prototype.slice),l=new function(){return this},c=null,r=function(){l.ctn=document.querySelector(t),l.ctnWidth=parseInt(i(l.ctn).width),l.list=e?e:o(l.ctn.querySelectorAll(".item"));var n=document.createElement("div");n.className="item hidden",document.body.appendChild(n);var c=i(n);l.margin=parseInt(c.marginRight),l.colWidth=parseInt(c.width),l.colCount=Math.floor(l.ctnWidth/l.colWidth),l.computeWidth=l.ctnWidth/l.colCount,l.computeColWidth=l.computeWidth-l.margin*(l.colCount-1)/l.colCount+"px",document.body.removeChild(n)},u=function(){for(var t=[],e=0;e<l.colCount;e++){var n=document.createElement("div");n.className="tilesmith-col",n.style.width=l.computeColWidth,n.style.float="left",n.setAttribute("data-id",e),n.style.marginRight=l.margin+"px",e===l.colCount-1&&(n.style.marginRight=0),t.push(n)}var i=0;l.list.forEach(function(e){e.style.width="100%",i>l.colCount-1&&(i=0),t[i].appendChild(e),i++}),l.ctn.innerHTML=null,t.forEach(function(t){l.ctn.appendChild(t)})},a=function(){var t=l.ctn.querySelectorAll(".tilesmith-col");o(t).forEach(function(t){t.style.width=l.computeColWidth}),n()},d=function(){var t=l.colCount;c&&clearTimeout(c),c=null,r(),t!==l.colCount?u():a(),n(),t=null},h=function(){r(),u(),n(),window.onresize=function(){c&&clearTimeout(c),c=setTimeout(d,100)}},p=function(){};return{init:h,append:p(e,"append"),prepend:p(e,"prepend")}};